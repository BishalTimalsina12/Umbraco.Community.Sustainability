{"version":3,"file":"sustainability-workspace-view-_gtAFcVK.js","sources":["../../../assets/src/documents/views/sustainability-workspace-view.ts"],"sourcesContent":["import { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport { html, LitElement, customElement, css, state, property } from '@umbraco-cms/backoffice/external/lit'\r\nimport { UMB_WORKSPACE_CONTEXT, UmbVariantableWorkspaceContextInterface } from \"@umbraco-cms/backoffice/workspace\";\r\nimport SustainabilityManagementContext, { SUSTAINABILITY_MANAGEMENT_CONTEXT_TOKEN } from \"../../context/sustainability.context\";\r\n\r\n@customElement('sustainability-workspace-view')\r\nexport class SustainabilityWorkspaceElement extends UmbElementMixin(LitElement) {\r\n\r\n    #sustainabilityContext?: SustainabilityManagementContext;\r\n\r\n    @state()\r\n    pageName?: string = '';\r\n\r\n    @property({type: Boolean})\r\n    loading?: boolean = true;\r\n\r\n    @property({type: String})\r\n    pageData?: string;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.consumeContext(UMB_WORKSPACE_CONTEXT, (nodeContext) => {\r\n            const variantContext = (nodeContext as UmbVariantableWorkspaceContextInterface);\r\n            console.log(variantContext.getName());\r\n            \r\n            this.pageName = variantContext.getName();\r\n\r\n        });\r\n\r\n        this.consumeContext(SUSTAINABILITY_MANAGEMENT_CONTEXT_TOKEN, (_instance) => {\r\n          this.#sustainabilityContext = _instance;\r\n\r\n          this.observe(_instance.pageData, (_pageData) => {\r\n            this.pageData = _pageData;\r\n            if (this.pageData != null) {\r\n              if (this.pageData !== \"unknown\") {\r\n                this.loading = false;\r\n              }\r\n            }\r\n          })\r\n        })\r\n    }\r\n\r\n    connectedCallback(): void {\r\n      super.connectedCallback();\r\n\r\n      if (this.#sustainabilityContext != null) {\r\n        if (this.loading) {\r\n          this.#sustainabilityContext.getPageData(0);\r\n        }\r\n      }\r\n    }\r\n\r\n    render() {\r\n        if (this.loading) {\r\n          return html`\r\n              <uui-box headline=\"Loading sustainability report...\">\r\n                  <p>It looks like you haven't run a report on this page yet. Click the button below to get started.</p>\r\n                  <uui-button look=\"primary\">\r\n                    Run sustainability report\r\n                  </uui-button>\r\n              </uui-box>\r\n          `;\r\n        }\r\n        else {\r\n          return html`\r\n            <uui-box>\r\n            </uui-box>\r\n          `;\r\n        }\r\n    }\r\n\r\n    static styles = css`\r\n        uui-box {\r\n            margin: 24px;\r\n        }\r\n    `\r\n}\r\n\r\nexport default SustainabilityWorkspaceElement;\r\n"],"names":["_sustainabilityContext","SustainabilityWorkspaceElement","UmbElementMixin","LitElement","__privateAdd","UMB_WORKSPACE_CONTEXT","nodeContext","variantContext","SUSTAINABILITY_MANAGEMENT_CONTEXT_TOKEN","_instance","__privateSet","_pageData","__privateGet","html","css","__decorateClass","state","property","customElement","SustainabilityWorkspaceElement$1"],"mappings":";;;;;;;;;;;;;;;;;;;;+FAAAA;AAMO,IAAMC,IAAN,cAA6CC,EAAgBC,CAAU,EAAE;AAAA,EAa5E,cAAc;AACJ,aAZVC,EAAA,MAAAJ,GAAA,MAAA,GAGoB,KAAA,WAAA,IAGA,KAAA,UAAA,IAQX,KAAA,eAAeK,GAAuB,CAACC,MAAgB;AACxD,YAAMC,IAAkBD;AAChB,cAAA,IAAIC,EAAe,QAAS,CAAA,GAE/B,KAAA,WAAWA,EAAe;IAAQ,CAE1C,GAEI,KAAA,eAAeC,GAAyC,CAACC,MAAc;AAC1E,MAAAC,EAAA,MAAKV,GAAyBS,CAAA,GAE9B,KAAK,QAAQA,EAAU,UAAU,CAACE,MAAc;AAC9C,aAAK,WAAWA,GACZ,KAAK,YAAY,QACf,KAAK,aAAa,cACpB,KAAK,UAAU;AAAA,MAEnB,CACD;AAAA,IAAA,CACF;AAAA,EACL;AAAA,EAEA,oBAA0B;AACxB,UAAM,kBAAkB,GAEpBC,EAAA,MAAKZ,MAA0B,QAC7B,KAAK,WACFY,EAAA,MAAAZ,CAAA,EAAuB,YAAY,CAAC;AAAA,EAG/C;AAAA,EAEA,SAAS;AACL,WAAI,KAAK,UACAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAUAA;AAAA;AAAA;AAAA;AAAA,EAKb;AAOJ;AAtEIb,IAAA,oBAAA,QAAA;AAFSC,EAmEF,SAASa;AAAA;AAAA;AAAA;AAAA;AA9DhBC,EAAA;AAAA,EADCC,EAAM;AAAA,GAJEf,EAKT,WAAA,YAAA,CAAA;AAGAc,EAAA;AAAA,EADCE,EAAS,EAAC,MAAM,SAAQ;AAAA,GAPhBhB,EAQT,WAAA,WAAA,CAAA;AAGAc,EAAA;AAAA,EADCE,EAAS,EAAC,MAAM,QAAO;AAAA,GAVfhB,EAWT,WAAA,YAAA,CAAA;AAXSA,IAANc,EAAA;AAAA,EADNG,EAAc,+BAA+B;AAAA,GACjCjB,CAAA;AA0Eb,MAAAkB,IAAelB;"}